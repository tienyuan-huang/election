# **台灣選舉情勢分析地圖工具**

這是一個前端視覺化專案，旨在協助罷免案的志工或政治工作者，透過分析歷年立法委員選舉的村里層級數據，來制定更有效的溝通與催票策略。使用者可以透過互動式地圖，直觀地了解各選區的政治版圖、候選人支持度，以及潛在的動員空間。

## **✨ 主要功能**

* **互動式地圖**：使用 [Leaflet.js](https://leafletjs.com/) 顯示台灣各村里的地理邊界，並根據選舉結果進行顏色編碼。  
* **多年份資料切換**：可自由切換 2024、2020、2016 年的區域立委選舉資料進行分析。  
* **選區篩選與搜尋**：  
  * 可從下拉選單中快速篩選特定選區。  
  * 支援關鍵字搜尋，能透過候選人姓名或行政區名稱快速定位相關選區。  
* **詳細數據儀表板**：  
  * 點擊任一村里，右側儀表板會顯示該地的詳細資訊。  
  * **關鍵指標**：包含「催票率」與「未投票率」，幫助評估候選人基本盤實力與潛在動員空間。  
  * **候選人得票分佈**：使用 [Chart.js](https://www.chartjs.org/) 以長條圖呈現所有候選人的得票數。  
* **個人化標註系統**：  
  * 使用者可針對感興趣的村里新增、編輯或刪除個人註解。  
  * 標註會以圖釘顯示在地圖上，方便快速定位。  
* **資料匯出**：可將所有標註匯出為 .CSV 或 .KML 格式，方便在其他軟體（如 Google Earth, Excel）中進一步分析或共享。  
* **響應式設計**：介面會自動適應桌面與行動裝置，方便在各種裝置上使用。

## **📊 關鍵指標說明**

本地圖工具使用以下兩個核心指標來評估選舉情勢：

1. **催票率 (Mobilization Rate)**  
   * **定義**：候選人在「整個村里所有具備投票資格的選民中」獲得了多少支持。  
   * **計算方式**：候選人得票數 ÷ 總選舉人數  
   * **意義**：此指標能排除投票率高低的影響，更真實地反映候選人在該地區的「基本盤」實力。  
2. **未投票率 (Non-voter Rate)**  
   * **定義**：該村里「有多少比例的合格選民，最終沒有出來投票」。  
   * **計算方式**：(總選舉人數 \- 總投票數) ÷ 總選舉人數  
   * **意義**：此數字可以幫助我們了解此地區還有多少潛在的「動員空間」。

## **🎨 地圖顏色說明**

地圖上的村里顏色代表該次選舉中，主要政黨候選人的催票率領先情況：

* \<span style="color: \#3b82f6;"\>**藍色區域**\</span\>：中國國民黨候選人，取得 5% 以上的催票率優勢。  
* \<span style="color: \#16a34a;"\>**綠色區域**\</span\>：民主進步黨候選人，取得 5% 以上的催票率優勢。  
* \<span style="color: \#ef4444;"\>**紅色區域**\</span\>：主要競爭者之間，催票率差距在 5% 以內，屬於激戰區。  
* \<span style="color: rgba(0, 0, 0, 0.6);"\>**黑色區域**\</span\>：由其他政黨或無黨籍候選人取得領先。

## **🛠️ 使用技術**

* **前端框架**：無，使用原生 HTML, CSS, JavaScript。  
* **CSS 框架**：[Tailwind CSS](https://tailwindcss.com/)  
* **地圖函式庫**：[Leaflet.js](https://leafletjs.com/)  
* **圖表函式庫**：[Chart.js](https://www.chartjs.org/)  
* **CSV 解析**：[PapaParse](https://www.papaparse.com/)

## **📁 專案結構與資料來源**

本專案的運作依賴於預先處理好的選舉資料與地理圖資。  
.  
├── index.html          \# 主要的 HTML 結構  
├── script.js           \# 核心的 JavaScript 邏輯  
├── style.css           \# 自定義樣式  
├── data/  
│   ├── village.geojson \# 全台灣的村里地理圖資  
│   ├── 2024/  
│   │   └── regional\_legislator\_votes.csv  
│   ├── 2020/  
│   │   └── regional\_legislator\_votes.csv  
│   └── 2016/  
│       └── regional\_legislator\_votes.csv  
└── README.md           \# 本文件

* **資料來源**：所有選舉資料（.csv）均是根據 選舉資料技術守則.md 中定義的格式進行處理。資料以「村里」為最小單位，並包含每位候選人的得票數、選舉人數等詳細資訊。  
* **地理圖資**：village.geojson 包含了全台灣所有村里的邊界多邊形(Polygon)。  
* **資料串接**：應用程式透過 geo\_key（村里代碼）將選舉資料與地理圖資的對應圖塊進行匹配，從而將數據渲染到地圖上。

## **🚀 如何在本機端運行**

由於瀏覽器的安全性限制（CORS 政策），直接用瀏覽器開啟 index.html 將無法成功讀取外部的 .csv 與 .geojson 檔案。您需要透過一個本地伺服器來運行此專案。

1. **前置需求**：  
   * 安裝 [Node.js](https://nodejs.org/) (會一併安裝 npm)。  
   * 或安裝 [Python](https://www.python.org/)。  
2. 啟動本地伺服器：  
   在專案的根目錄下，開啟您的終端機，並根據您安裝的工具擇一執行以下指令：  
   * **使用 Node.js (npx)** (推薦，無需額外安裝)：  
     npx serve

   * **使用 Python 3**：  
     python \-m http.server

3. 開啟瀏覽器：  
   伺服器啟動後，終端機會顯示一個本地網址，通常是 http://localhost:8080 或 http://localhost:3000。在瀏覽器中開啟此網址即可看到運作的應用程式。
